{"ast":null,"code":"import _objectSpread from \"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/mac/ironhack/lab/module_III/toysland/front/src/components/misc/UpProduct.js\";\nimport React, { Component } from 'react';\nimport ToyslandService from '../../services/ToyslandService';\nimport { Link, Redirect } from 'react-router-dom';\nimport { WithAuthConsumer } from '../context/AuthContext';\n\nclass UpProduct extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {\n        category: '',\n        name: '',\n        price: Number,\n        coin: '',\n        description: '',\n        productPicture: null\n      },\n      error: false,\n      loading: false,\n      success: false,\n      categories: []\n    };\n\n    this.handleChange = event => {\n      const _event$target = event.target,\n            name = _event$target.name,\n            value = _event$target.value,\n            files = _event$target.files;\n      this.setState({\n        data: _objectSpread({}, this.state.data, {\n          [name]: files ? files[0] : value\n        })\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const formData = new FormData();\n      formData.append('profilePicture', this.state.data.product);\n      this.setState({\n        loading: true,\n        error: false\n      }, () => {\n        ToyslandService.product(formData, this.props.currentUser.id).then(product => {\n          this.props.setUser(product);\n          this.setState({\n            success: true\n          });\n        }).catch(error => {\n          this.setState({\n            error: true,\n            loading: false\n          });\n        });\n      });\n    };\n\n    this.componentDidMount = () => {\n      ToyslandService.categories().then(categories => {\n        this.setState({\n          categories: categories // Las de state\n\n        });\n      });\n    };\n  }\n\n  render() {\n    const errorClassName = this.state.error ? 'is-invalid' : '';\n\n    if (this.state.success) {\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      });\n    }\n\n    console.log(this.state.categories);\n    return React.createElement(\"div\", {\n      className: \"Register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"category\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(\"select\", {\n      id: \"category\",\n      name: \"category\",\n      form: \"carform\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, this.state.categories.map(e => {\n      return React.createElement(\"option\", {\n        value: e.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, e.category);\n    }))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Nombre\"), React.createElement(\"input\", {\n      value: this.state.data.name,\n      onChange: this.handleChange,\n      autoComplete: \"off\",\n      name: \"name\",\n      type: \"text\",\n      className: `form-control ${errorClassName}`,\n      id: \"name\",\n      placeholder: \"Nombre\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"Precio\"), React.createElement(\"input\", {\n      value: this.state.data.price,\n      onChange: this.handleChange,\n      autoComplete: \"off\",\n      name: \"price\",\n      type: \"number\",\n      className: `form-control ${errorClassName}`,\n      id: \"price\",\n      placeholder: \"Price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"coin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Moneda\"), React.createElement(\"select\", {\n      id: \"coin\",\n      name: \"coin\",\n      form: \"coin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: this.state.data.coin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"\\u20AC\"), React.createElement(\"option\", {\n      value: this.state.data.coin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"$\"), React.createElement(\"option\", {\n      value: this.state.data.coin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"\\xA3\"))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Descripci\\xF3n\"), React.createElement(\"input\", {\n      value: this.state.data.description,\n      onChange: this.handleChange,\n      autoComplete: \"off\",\n      name: \"description\",\n      type: \"text\",\n      className: `form-control ${errorClassName}`,\n      id: \"description\",\n      placeholder: \"M\\xE1x 140 caracteres\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"productPicture\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"Im\\xE1genes\"), React.createElement(\"input\", {\n      onChange: this.handleChange,\n      name: \"productPicture\",\n      type: \"file\",\n      className: `form-group ${errorClassName}`,\n      id: \"productPicture\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-block btn-primary mb-3\",\n      disabled: this.state.loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Subir Producto\")));\n  }\n\n}\n\nexport default WithAuthConsumer(UpProduct);","map":{"version":3,"sources":["/Users/mac/ironhack/lab/module_III/toysland/front/src/components/misc/UpProduct.js"],"names":["React","Component","ToyslandService","Link","Redirect","WithAuthConsumer","UpProduct","state","data","category","name","price","Number","coin","description","productPicture","error","loading","success","categories","handleChange","event","target","value","files","setState","handleSubmit","preventDefault","formData","FormData","append","product","props","currentUser","id","then","setUser","catch","componentDidMount","render","errorClassName","console","log","map","e"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport ToyslandService from '../../services/ToyslandService'\nimport { Link, Redirect } from 'react-router-dom'\nimport { WithAuthConsumer } from '../context/AuthContext'\n\nclass UpProduct extends Component {\n\n    state = {\n        data: {\n            category: '',\n            name: '',\n            price: Number,\n            coin: '',\n            description: '',\n            productPicture: null\n        },\n        error: false,\n        loading: false,\n        success: false,\n        categories: []\n    }\n\n    handleChange = (event) => {\n        const {name, value, files} = event.target\n\n        this.setState({\n            data: {\n                ...this.state.data,\n                [name] : files ? files[0] : value\n            }\n        })\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault()\n\n        const formData = new FormData()\n            formData.append('profilePicture',this.state.data.product)\n\n        this.setState({loading: true, error: false}, () => {\n            ToyslandService.product(formData, this.props.currentUser.id)\n                .then((product) => {\n                    this.props.setUser(product)\n                    this.setState({success: true})\n                })\n                .catch(error => {\n                    this.setState({ error: true, loading: false })\n                })\n            })\n    }\n\n    componentDidMount = () => {\n        ToyslandService.categories().then(categories => {\n            this.setState({\n                categories: categories // Las de state\n            })\n        })\n    }\n\n    render() {\n        const errorClassName = this.state.error ? 'is-invalid' : ''\n\n        if(this.state.success) {\n            return <Redirect to='/' />\n        }\n\n        console.log(this.state.categories)\n        return (\n            <div className=\"Register\">\n                <form onSubmit={this.handleSubmit}>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"category\"></label>\n\n                        <select id=\"category\" name=\"category\" form=\"carform\">\n                            {this.state.categories.map(e => {\n                                return <option value={e.id}>{e.category}</option>\n                            })}\n                        </select>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"name\">Nombre</label>\n\n                        <input \n                            value={this.state.data.name}\n                            onChange={this.handleChange}\n                            autoComplete=\"off\"\n                            name=\"name\"\n                            type=\"text\"\n                            className={`form-control ${errorClassName}`}\n                            id=\"name\"\n                            placeholder=\"Nombre\"                       \n                        />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"price\">Precio</label>\n\n                        <input \n                            value={this.state.data.price}\n                            onChange={this.handleChange}\n                            autoComplete=\"off\"\n                            name=\"price\"\n                            type=\"number\"\n                            className={`form-control ${errorClassName}`}\n                            id=\"price\"\n                            placeholder=\"Price\"                       \n                        />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"coin\">Moneda</label>\n\n                        <select id=\"coin\" name=\"coin\" form=\"coin\">\n                            <option value={this.state.data.coin}>€</option>\n                            <option value={this.state.data.coin}>$</option>\n                            <option value={this.state.data.coin}>£</option>\n                        </select>\n\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"description\">Descripción</label>\n\n                        <input \n                            value={this.state.data.description}\n                            onChange={this.handleChange}\n                            autoComplete=\"off\"\n                            name=\"description\"\n                            type=\"text\"\n                            className={`form-control ${errorClassName}`}\n                            id=\"description\"\n                            placeholder=\"Máx 140 caracteres\"                       \n                        />\n                    </div>\n\n                    \n                    <div className='form-group'>\n                                <label htmlFor='productPicture'>Imágenes</label>\n\n                                <input \n                                    onChange={this.handleChange}\n                                    name='productPicture'\n                                    type='file'\n                                    className={`form-group ${errorClassName}`}\n                                    id='productPicture'\n                                />\n\n\n                    </div>\n\n                    <button\n                        type='submit'\n                        className='btn btn-block btn-primary mb-3'\n                        disabled={this.state.loading}\n                    >\n                        Subir Producto\n                    </button>\n\n                </form>\n            </div>\n        )\n    }\n}\n\n\n\nexport default WithAuthConsumer (UpProduct)\n"]},"metadata":{},"sourceType":"module"}