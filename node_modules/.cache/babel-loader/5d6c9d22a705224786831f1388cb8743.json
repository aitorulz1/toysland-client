{"ast":null,"code":"import _defineProperty from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import ToyslandService from'../../services/ToyslandService';import{Link,Redirect}from'react-router-dom';import{WithAuthConsumer}from'../context/AuthContext';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);function Login(){var _getPrototypeOf2;var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Login)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={data:{email:'',password:''},error:false,loading:false};_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState({data:_objectSpread({},_this.state.data,_defineProperty({},name,value))});};_this.handleSubmit=function(event){event.preventDefault();_this.setState({loading:true,error:false},function(){ToyslandService.login(_objectSpread({},_this.state.data)).then(function(user){_this.props.setUser(user);},function(){_this.setState({error:true,loading:false});});});};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var errorClassName=this.state.error?'is-invalid':'';console.log(this.props);if(this.props.currentUser){return React.createElement(Redirect,{to:\"/profile\"});}return React.createElement(\"div\",{className:\"RegisterContainer\"},React.createElement(\"div\",{className:\"RegisterContainerContainer\"},React.createElement(\"div\",{className:\"Register\"},React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"input\",{value:this.state.data.email,onChange:this.handleChange,autoComplete:\"off\",name:\"email\",type:\"email\",className:\"form-control \".concat(errorClassName),id:\"email\",placeholder:\"Email\"})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"input\",{value:this.state.data.password,onChange:this.handleChange,name:\"password\",type:\"password\",className:\"form-control \".concat(errorClassName),id:\"password\",placeholder:\"password\"})),React.createElement(\"button\",{type:\"submit\",className:\"btn btn-toysland\",disabled:this.state.loading},\"Log in\"),React.createElement(Link,{to:\"/register\",className:\"link-login\"},\"Register\"),React.createElement(\"span\",{className:\"line\"})))),React.createElement(\"div\",{className:\"Space\"}));}}]);return Login;}(Component);export default WithAuthConsumer(Login);","map":{"version":3,"sources":["/Users/mac/ironhack/lab/module_III/toysland/front/src/components/misc/Login.js"],"names":["React","Component","ToyslandService","Link","Redirect","WithAuthConsumer","Login","state","data","email","password","error","loading","handleChange","event","target","name","value","setState","handleSubmit","preventDefault","login","then","user","props","setUser","errorClassName","console","log","currentUser"],"mappings":"26BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,eAAP,KAA4B,gCAA5B,CACA,OAASC,IAAT,CAAeC,QAAf,KAA+B,kBAA/B,CACA,OAASC,gBAAT,KAAiC,wBAAjC,C,GAEMC,CAAAA,K,2XAEFC,K,CAAQ,CACJC,IAAI,CAAE,CACFC,KAAK,CAAE,EADL,CAEFC,QAAQ,CAAE,EAFR,CADF,CAKJC,KAAK,CAAE,KALH,CAMJC,OAAO,CAAE,KANL,C,OASRC,Y,CAAe,SAACC,KAAD,CAAW,mBACEA,KAAK,CAACC,MADR,CACdC,IADc,eACdA,IADc,CACRC,KADQ,eACRA,KADQ,CAGtB,MAAKC,QAAL,CAAc,CACVV,IAAI,kBACG,MAAKD,KAAL,CAAWC,IADd,oBAECQ,IAFD,CAEQC,KAFR,EADM,CAAd,EAMH,C,OAEDE,Y,CAAe,SAACL,KAAD,CAAW,CACtBA,KAAK,CAACM,cAAN,GAEA,MAAKF,QAAL,CAAc,CAAEN,OAAO,CAAE,IAAX,CAAiBD,KAAK,CAAE,KAAxB,CAAd,CAA+C,UAAM,CACnDT,eAAe,CAACmB,KAAhB,kBAA2B,MAAKd,KAAL,CAAWC,IAAtC,GACGc,IADH,CAEI,SAACC,IAAD,CAAU,CACR,MAAKC,KAAL,CAAWC,OAAX,CAAmBF,IAAnB,EACD,CAJL,CAKI,UAAM,CACJ,MAAKL,QAAL,CAAc,CAAEP,KAAK,CAAE,IAAT,CAAeC,OAAO,CAAE,KAAxB,CAAd,EACD,CAPL,EASD,CAVD,EAWD,C,wEAEU,CACL,GAAMc,CAAAA,cAAc,CAAG,KAAKnB,KAAL,CAAWI,KAAX,CAAmB,YAAnB,CAAkC,EAAzD,CACAgB,OAAO,CAACC,GAAR,CAAY,KAAKJ,KAAjB,EAEA,GAAG,KAAKA,KAAL,CAAWK,WAAd,CAA2B,CACvB,MAAO,qBAAC,QAAD,EAAU,EAAE,CAAC,UAAb,EAAP,CACH,CAGD,MACA,4BAAK,SAAS,CAAC,mBAAf,EACI,2BAAK,SAAS,CAAC,4BAAf,EACA,2BAAK,SAAS,CAAC,UAAf,EACI,4BAAM,QAAQ,CAAE,KAAKV,YAArB,EACI,2BAAK,SAAS,CAAC,YAAf,EAEI,6BACI,KAAK,CAAE,KAAKZ,KAAL,CAAWC,IAAX,CAAgBC,KAD3B,CAEI,QAAQ,CAAE,KAAKI,YAFnB,CAGI,YAAY,CAAC,KAHjB,CAII,IAAI,CAAC,OAJT,CAKI,IAAI,CAAC,OALT,CAMI,SAAS,wBAAkBa,cAAlB,CANb,CAOI,EAAE,CAAC,OAPP,CAQI,WAAW,CAAC,OARhB,EAFJ,CADJ,CAeI,2BAAK,SAAS,CAAC,YAAf,EAEI,6BACI,KAAK,CAAE,KAAKnB,KAAL,CAAWC,IAAX,CAAgBE,QAD3B,CAEI,QAAQ,CAAE,KAAKG,YAFnB,CAGI,IAAI,CAAC,UAHT,CAII,IAAI,CAAC,UAJT,CAKI,SAAS,wBAAkBa,cAAlB,CALb,CAMI,EAAE,CAAC,UANP,CAOI,WAAW,CAAC,UAPhB,EAFJ,CAfJ,CA4BI,8BACI,IAAI,CAAC,QADT,CAEI,SAAS,CAAC,kBAFd,CAGI,QAAQ,CAAE,KAAKnB,KAAL,CAAWK,OAHzB,WA5BJ,CAqCI,oBAAC,IAAD,EAAM,EAAE,CAAC,WAAT,CAAqB,SAAS,CAAC,YAA/B,aArCJ,CAsCQ,4BAAM,SAAS,CAAC,MAAhB,EAtCR,CADJ,CADA,CADJ,CA6CA,2BAAK,SAAS,CAAC,OAAf,EA7CA,CADA,CAkDH,C,mBAjGWX,S,EAuGpB,cAAeI,CAAAA,gBAAgB,CAACC,KAAD,CAA/B","sourcesContent":["import React, { Component } from 'react'\nimport ToyslandService from '../../services/ToyslandService'\nimport { Link, Redirect } from 'react-router-dom'\nimport { WithAuthConsumer } from '../context/AuthContext'\n\nclass Login extends Component {\n\n    state = {\n        data: {\n            email: '',\n            password: ''\n        },\n        error: false,\n        loading: false\n    }\n\n    handleChange = (event) => {\n        const { name, value } = event.target\n\n        this.setState({\n            data: {\n                ...this.state.data,\n                [name]: value\n            }\n        })\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault()\n\n        this.setState({ loading: true, error: false }, () => {\n          ToyslandService.login({ ...this.state.data })\n            .then(\n              (user) => {\n                this.props.setUser(user)\n              },\n              () => {\n                this.setState({ error: true, loading: false })\n              }\n            )\n        })\n      }\n\n        render() {\n            const errorClassName = this.state.error ? 'is-invalid' : ''\n            console.log(this.props)\n\n            if(this.props.currentUser) {\n                return <Redirect to=\"/profile\" />\n            }\n        \n\n            return (\n            <div className=\"RegisterContainer\">\n                <div className=\"RegisterContainerContainer\">\n                <div className=\"Register\">\n                    <form onSubmit={this.handleSubmit}>\n                        <div className=\"form-group\">                \n\n                            <input \n                                value={this.state.data.email}\n                                onChange={this.handleChange}\n                                autoComplete='off'\n                                name=\"email\"\n                                type=\"email\"\n                                className={`form-control ${errorClassName}`}\n                                id='email'\n                                placeholder=\"Email\"\n                            />\n                        </div>\n\n                        <div className=\"form-group\">                            \n\n                            <input \n                                value={this.state.data.password}\n                                onChange={this.handleChange}\n                                name=\"password\"\n                                type=\"password\"\n                                className={`form-control ${errorClassName}`}\n                                id='password'\n                                placeholder=\"password\"\n                            />\n                        </div>\n\n                        <button\n                            type=\"submit\"\n                            className='btn btn-toysland'\n                            disabled={this.state.loading}\n                        >\n                            Log in\n\n                        </button>\n\n                        <Link to=\"/register\" className=\"link-login\">Register</Link>\n                            <span className=\"line\"></span>\n                    </form>\n                </div>\n            </div>\n            <div className=\"Space\"></div>\n            </div>\n            )\n\n        }       \n    }\n\n\n\n\nexport default WithAuthConsumer(Login)"]},"metadata":{},"sourceType":"module"}