{"ast":null,"code":"import _classCallCheck from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import ToyslandService from'../../services/ToyslandService';import{WithAuthConsumer}from'../context/AuthContext';import{Link,Redirect}from'react-router-dom';var SingleProduct=/*#__PURE__*/function(_Component){_inherits(SingleProduct,_Component);function SingleProduct(props){var _this;_classCallCheck(this,SingleProduct);_this=_possibleConstructorReturn(this,_getPrototypeOf(SingleProduct).call(this,props));_this.handleSubmit=function(event){event.preventDefault();_this.setState({loading:true,error:false},function(){return ToyslandService.createLike(_this.props.currentUser.id,_this.state.product.id).then(function(like){// Siempre devuelve lo que devuelve el back\nconsole.log(like);}).catch(function(){_this.setState({error:true,loading:false});});});};_this.handleChat=function(event){event.preventDefault();_this.setState({loading:true,error:false},function(){return ToyslandService.createChat(_this.props.currentUser.id,_this.state.product.user.id,_this.state.product.id).then(function(chat){_this.setState({redirect:true});}).catch(function(){_this.setState({error:true,loading:false});});});};_this.state={product:{},error:false,loading:false};return _this;}_createClass(SingleProduct,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;ToyslandService.getThisProduct(this.props.match.params.id).then(function(product){_this2.setState({product:product},function(){return console.log(_this2.state.product);});},function(){return console.log(_this2.state.product);});}},{key:\"render\",value:function render(){if(this.state.redirect){return React.createElement(Redirect,{to:\"/chat/\".concat(this.props.match.params.id)});}return React.createElement(\"div\",{className:\"SingleProductContainer\"},React.createElement(\"div\",{className:\"SingleProductContainerContainer\"},React.createElement(\"div\",{className:\"Preheader\"},React.createElement(\"div\",{className:\"Preheader-title\"},this.state.product.name),React.createElement(\"div\",{className:\"Preheader-cat\"},React.createElement(Link,{to:\"/categories/\".concat(this.state.product.category)},this.state.product.category),\" \")),React.createElement(\"div\",{className:\"SingleProductContainerContainerContainer\"},React.createElement(\"div\",{className:\"single-card-image\"},React.createElement(\"div\",{className:\"header-container\"},React.createElement(\"div\",{className:\"header-user-container\"},React.createElement(\"div\",{className:\"user-pic\"},React.createElement(\"img\",{src:this.state.product.user&&this.state.product.user.profilePicture,alt:\"\"})),React.createElement(\"div\",{className:\"user-username\"},this.state.product.user&&this.state.product.user.username)),React.createElement(\"div\",{className:\"buttons-container\"},React.createElement(\"div\",null,React.createElement(\"form\",{onSubmit:this.handleChat},React.createElement(\"div\",{className:\"button-message\"},React.createElement(\"button\",{type:\"submit\"},\"chat\")))),React.createElement(\"div\",null,React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"div\",{className:\"button-lovit\"},React.createElement(\"button\",{type:\"submit\"},\"Like\")))))),React.createElement(\"div\",{className:\"single-card-image-container\"},React.createElement(\"img\",{src:this.state.product.productPicture,alt:\"\"})),React.createElement(\"div\",{className:\"card-data-container\"},React.createElement(\"div\",{className:\"single-card-price\"},this.state.product.price,\"\\u20AC\"),React.createElement(\"div\",{className:\"single-card-name\"},this.state.product.name),React.createElement(\"div\",{className:\"single-card-description\"},this.state.product.description),React.createElement(\"div\",{className:\"single-card-date\"},this.state.product.createdAt))))));}}]);return SingleProduct;}(Component);export default WithAuthConsumer(SingleProduct);","map":{"version":3,"sources":["/Users/mac/ironhack/lab/module_III/toysland/front/src/components/misc/SingleProduct.js"],"names":["React","Component","ToyslandService","WithAuthConsumer","Link","Redirect","SingleProduct","props","handleSubmit","event","preventDefault","setState","loading","error","createLike","currentUser","id","state","product","then","like","console","log","catch","handleChat","createChat","user","chat","redirect","getThisProduct","match","params","name","category","profilePicture","username","productPicture","price","description","createdAt"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport ToyslandService from '../../services/ToyslandService'\nimport { WithAuthConsumer } from '../context/AuthContext'\nimport { Link, Redirect } from 'react-router-dom'\n\n\nclass SingleProduct extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            product: {},\n            error: false,\n            loading: false,\n        }\n    }\n\n\n    componentDidMount() { \n        ToyslandService.getThisProduct(this.props.match.params.id)\n            .then(product => {\n                this.setState({product}, () => console.log(this.state.product))\n            }, () =>     console.log(this.state.product)\n            )\n    }\n\n\n    handleSubmit = (event) => {\n        event.preventDefault() \n\n        this.setState({loading: true, error: false}, () =>\n            ToyslandService.createLike(this.props.currentUser.id, this.state.product.id)\n                .then((like) => { // Siempre devuelve lo que devuelve el back\n                    console.log(like)\n                })\n                .catch(() => {\n                    this.setState({error: true, loading: false})\n                })\n        )\n    }\n\n    handleChat = (event) => {\n        event.preventDefault()\n\n        this.setState({loading: true, error: false}, () =>\n            ToyslandService.createChat(this.props.currentUser.id, this.state.product.user.id, this.state.product.id)\n                .then((chat) => {\n                    this.setState({ redirect: true })\n                })\n                .catch(() => {\n                    this.setState({error: true, loading: false})\n                })\n        )\n    }\n    \n\n    render() {    \n        if (this.state.redirect) {\n            return <Redirect to={`/chat/${this.props.match.params.id}`} />\n        }\n        return(\n    \n            \n    <div className=\"SingleProductContainer\">\n        <div className=\"SingleProductContainerContainer\">\n\n            <div className=\"Preheader\">\n                <div className=\"Preheader-title\">{this.state.product.name}</div>\n                <div className=\"Preheader-cat\"><Link to={`/categories/${this.state.product.category}`}>{this.state.product.category}</Link> </div>\n            </div>\n\n            <div className=\"SingleProductContainerContainerContainer\">\n\n                <div className=\"single-card-image\">\n                    <div className=\"header-container\">\n                        <div className=\"header-user-container\">\n                            <div className=\"user-pic\"><img src={this.state.product.user && this.state.product.user.profilePicture} alt=\"\" /></div>\n                            <div className=\"user-username\">{this.state.product.user && this.state.product.user.username}</div>\n                            \n                        </div>\n\n                        <div className=\"buttons-container\"> \n\n                                <div>\n                                    <form onSubmit={this.handleChat}>\n                                        <div className=\"button-message\">\n                                            <button type=\"submit\">\n                                                chat\n                                            </button>\n                                        </div>\n                                    </form>\n                                </div>\n        \n                                <div>\n                                    <form onSubmit={this.handleSubmit}>\n                                        <div className=\"button-lovit\">\n                                            <button type=\"submit\">\n                                                Like\n                                            </button>\n                                        </div>  \n                                    </form>\n                                </div>   \n                        \n                        </div>\n                    </div>\n                    <div className=\"single-card-image-container\">\n                        <img src={this.state.product.productPicture} alt=\"\" />\n                    </div>\n                    <div className=\"card-data-container\">\n                        <div className=\"single-card-price\">{this.state.product.price}â‚¬</div>\n                        <div className=\"single-card-name\">{this.state.product.name}</div>\n                        <div className=\"single-card-description\">{this.state.product.description}</div>                                  \n                        <div className=\"single-card-date\">{this.state.product.createdAt}</div>                                  \n                    </div>\n                </div>\n            \n            </div>\n        </div>\n    </div>\n        )\n    }\n\n\n\n}\n\nexport default WithAuthConsumer (SingleProduct)"]},"metadata":{},"sourceType":"module"}