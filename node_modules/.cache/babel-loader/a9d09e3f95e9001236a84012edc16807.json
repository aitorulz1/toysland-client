{"ast":null,"code":"import _objectSpread from \"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/mac/ironhack/lab/module_III/toysland/front/src/components/misc/Register.js\";\nimport React, { Component } from 'react';\nimport ToyslandService from '../../services/ToyslandService';\nimport { Link, Redirect } from 'react-router-dom';\n\nclass Register extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {\n        name: '',\n        email: '',\n        username: '',\n        password: '',\n        profilePicture: null\n      },\n      error: false,\n      loading: false,\n      success: false\n    };\n\n    this.handleChange = event => {\n      const _event$target = event.target,\n            name = _event$target.name,\n            value = _event$target.value,\n            files = _event$target.files;\n      this.setState({\n        data: _objectSpread({}, this.state.data, {\n          [name]: files ? files[0] : value\n        })\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const formData = new FormData();\n      formData.append('name', this.state.data.name);\n      formData.append('username', this.state.data.username);\n      formData.append('email', this.state.data.email);\n      formData.append('password', this.state.data.password);\n      formData.append('profilePicture', this.state.data.avatar);\n      this.setState({\n        loading: true,\n        error: false\n      }, () => {\n        ToyslandService.register(formData).then(() => {\n          this.setState({\n            success: true\n          });\n        }).catch(() => {\n          this.setState({\n            error: true,\n            loading: false\n          });\n        });\n      });\n    };\n  }\n\n  render() {\n    const errorClassName = this.state.error ? 'is-invalid' : '';\n\n    if (this.state.success) {\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"Register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Nombre\"), React.createElement(\"input\", {\n      value: this.state.data.name,\n      onChange: this.handleChange,\n      autoComplete: \"off\",\n      name: \"name\",\n      type: \"text\",\n      className: `form-control ${errorClassName}`,\n      id: \"name\",\n      placeholder: \"Nombre\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"input\", {\n      value: this.state.data.username,\n      onChange: this.handleChange,\n      autoComplete: \"off\",\n      name: \"username\",\n      type: \"text\",\n      className: `forrm-control ${errorClassName}`,\n      id: \"username\",\n      placeholder: \"Username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Email\"), React.createElement(\"input\", {\n      value: this.state.data.email,\n      onChange: this.handleChange,\n      autoComplete: \"off\",\n      name: \"email\",\n      type: \"email\",\n      className: `form-control ${errorClassName}`,\n      id: \"email\",\n      placeholder: \"Email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      value: this.state.data.password,\n      onChange: this.handleChange,\n      name: \"password\",\n      type: \"password\",\n      className: `form-control ${errorClassName}`,\n      id: \"password\",\n      placeholder: \"Password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"avatar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Avatar\"), React.createElement(\"input\", {\n      onChange: this.handleChange,\n      name: \"avatar\",\n      type: \"file\",\n      className: `form-group ${errorClassName}`,\n      id: \"avatar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-block btn-primary mb-3\",\n      disabled: this.state.loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Registrarse\")));\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["/Users/mac/ironhack/lab/module_III/toysland/front/src/components/misc/Register.js"],"names":["React","Component","ToyslandService","Link","Redirect","Register","state","data","name","email","username","password","profilePicture","error","loading","success","handleChange","event","target","value","files","setState","handleSubmit","preventDefault","formData","FormData","append","avatar","register","then","catch","render","errorClassName"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport ToyslandService from '../../services/ToyslandService'\nimport { Link, Redirect} from 'react-router-dom'\n\nclass Register extends Component {\n\n        state = {\n            data: {\n                name: '',\n                email: '',\n                username: '',\n                password: '',\n                profilePicture: null\n            },\n            error: false,\n            loading: false,\n            success: false\n        }\n\n        handleChange = (event) => {\n            const { name, value, files} = event.target\n\n            this.setState({\n                data: {\n                    ...this.state.data,\n                    [name] : files ? files[0] : value\n                }\n            })\n        }\n\n        handleSubmit = (event) => {\n            event.preventDefault()\n\n            \n\n            const formData = new FormData()\n                formData.append('name',this.state.data.name)\n                formData.append('username',this.state.data.username)\n                formData.append('email',this.state.data.email)\n                formData.append('password',this.state.data.password)\n                formData.append('profilePicture',this.state.data.avatar)\n\n            this.setState({loading: true, error: false}, () => {\n                ToyslandService.register(formData)\n                    .then(() => {\n                        this.setState({ success: true })\n                    })\n                    .catch(() => {\n                        this.setState({ error: true, loading: false })\n                    })\n            })\n        }\n\n            render() {\n                const errorClassName = this.state.error ? 'is-invalid' : ''\n\n                if(this.state.success) {\n                    return <Redirect to='/login' />\n                }\n\n                return (\n                    <div className=\"Register\">\n                        <form onSubmit={this.handleSubmit}>\n\n                            <div className=\"form-group\">\n                                <label htmlFor=\"name\">Nombre</label>\n\n                                <input\n                                    value={this.state.data.name}\n                                    onChange={this.handleChange}\n                                    autoComplete=\"off\"\n                                    name=\"name\"\n                                    type=\"text\"\n                                    className={`form-control ${errorClassName}`}\n                                    id=\"name\"\n                                    placeholder=\"Nombre\"\n                                />\n                            </div>\n\n                            <div className=\"form-group\">\n                                <label htmlFor=\"username\">Username</label>\n\n                                <input\n                                    value={this.state.data.username}\n                                    onChange={this.handleChange}\n                                    autoComplete='off'\n                                    name='username'\n                                    type='text'\n                                    className={`forrm-control ${errorClassName}`}\n                                    id='username'\n                                    placeholder='Username'                                \n                                />\n\n                            </div>\n\n                            <div className='form-group'>\n                                <label htmlFor='email'>Email</label>\n\n                                <input \n                                    value={this.state.data.email}\n                                    onChange={this.handleChange}\n                                    autoComplete='off'\n                                    name='email'\n                                    type='email'\n                                    className={`form-control ${errorClassName}`}\n                                    id='email'\n                                    placeholder='Email'\n                                />\n\n                            </div>\n\n                            <div className='form-group'>\n                                <label htmlFor=\"password\">Password</label>\n\n                                <input\n                                    value={this.state.data.password}\n                                    onChange={this.handleChange}\n                                    name='password'\n                                    type='password'\n                                    className={`form-control ${errorClassName}`}\n                                    id='password'\n                                    placeholder='Password'\n                                />\n\n                            </div>\n\n                            <div className='form-group'>\n                                <label htmlFor='avatar'>Avatar</label>\n\n                                <input \n                                    onChange={this.handleChange}\n                                    name='avatar'\n                                    type='file'\n                                    className={`form-group ${errorClassName}`}\n                                    id='avatar'\n                                />\n                            </div>\n\n                            <button\n                                type='submit'\n                                className='btn btn-block btn-primary mb-3'\n                                disabled={this.state.loading}\n                            >\n                                Registrarse\n                            </button>\n\n                        </form>\n                    </div>\n                )\n            }\n\n}\n\nexport default Register"]},"metadata":{},"sourceType":"module"}