{"ast":null,"code":"import _toConsumableArray from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import ToyslandService from'../../services/ToyslandService';import Lateral from'../misc/Lateral';import{WithAuthConsumer}from'../context/AuthContext';import{Link}from'react-router-dom';import ChatMessage from'../misc/ChatMessage';var Chat=/*#__PURE__*/function(_Component){_inherits(Chat,_Component);function Chat(props){var _this;_classCallCheck(this,Chat);_this=_possibleConstructorReturn(this,_getPrototypeOf(Chat).call(this,props));_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.createComment=function(event){event.preventDefault();ToyslandService.createMessage(_this.state.chat.id,{'message':_this.state.message}).then(function(message){_this.setState({messages:[].concat(_toConsumableArray(_this.state.messages),[message])});}).catch(function(error){console.log(error);});};_this.state={message:'',messages:[],chat:{}};return _this;}_createClass(Chat,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;ToyslandService.showChat(this.props.match.params.id)// Porqué esto? Por que la url matchae con el \n.then(function(chat){console.log(chat);_this2.setState({chat:chat,messages:chat.messages});});ToyslandService.findMessages().then(function(messages){_this2.setState({messages:messages.filter(function(message){return message.user.id===_this2.props.match.params.id;})});});}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"div\",{className:\"EditContainer\"},React.createElement(\"div\",{className:\"LateralDiv\"},React.createElement(Lateral,null)),React.createElement(\"div\",{className:\"EditContainerContainerChat\"},React.createElement(\"div\",{className:\"blockOne\"},React.createElement(\"div\",{className:\"bandeja\"},\"Bandeja de Entrada\"),React.createElement(\"div\",{className:\"productToShow\"},React.createElement(\"div\",{className:\"productToShowContainer\"},React.createElement(\"div\",{className:\"chatImageContainer\"},React.createElement(\"img\",{src:this.state.chat.product&&this.state.chat.product.productPicture,alt:\"\"})),React.createElement(\"div\",{className:\"chatInfoContainer\"},React.createElement(\"div\",{className:\"chatLinkContainer\"},React.createElement(Link,{to:this.state.chat.product&&this.state.chat.product.category},this.state.chat.product&&this.state.chat.product.category)),React.createElement(\"div\",{className:\"chatNameContainer\"},this.state.chat.product&&this.state.chat.product.name))))),React.createElement(\"div\",{className:\"blockTwo\"},React.createElement(\"div\",{className:\"bandeja\"},React.createElement(\"div\",{className:\"productToShowContainerChat\"},React.createElement(\"div\",{className:\"chatImageContainerChat\"},React.createElement(\"img\",{src:this.state.chat.product&&this.state.chat.product.user.profilePicture,alt:\"\"})),React.createElement(\"div\",{className:\"chatInfoContainer\"},React.createElement(\"div\",{className:\"chatLinkContainer\"},this.state.chat.product&&this.state.chat.product.user.username),React.createElement(\"div\",{className:\"chatNameContainer\"},this.state.chat.product&&this.state.chat.product.user.name)))),React.createElement(\"div\",{className:\"SalerMessage\"},this.state.messages.map(function(message,index){return React.createElement(ChatMessage,Object.assign({},message,{key:index,currentUser:_this3.props.currentUser}));})),React.createElement(\"form\",{className:\"SalerMessage\",onSubmit:this.createComment},React.createElement(\"div\",{className:\"SendMessage\"},React.createElement(\"div\",{className:\"SendMessageContainer\"},React.createElement(\"input\",{type:\"text\",class:\"chat-footer__form-input\",value:this.state.message,name:\"message\",placeholder:\"New message\",onChange:this.handleChange}),React.createElement(\"button\",{type:\"submit\"},\"Enviar\"))))),React.createElement(\"div\",{className:\"blockThree\"},React.createElement(\"div\",{className:\"productCard\"},React.createElement(\"div\",{className:\"productToShowSummary\"},React.createElement(\"div\",{className:\"productToShowContainerSummary\"},React.createElement(\"div\",{className:\"productToShowContainerContainerSummary\"},React.createElement(\"div\",{className:\"chatImageContainerSummary\"},React.createElement(\"img\",{src:this.state.chat.product&&this.state.chat.product.productPicture,alt:\"\"})),React.createElement(\"div\",{className:\"chatInfoContainer\"},React.createElement(\"div\",{className:\"chatUserNameContainer\"},this.state.chat.product&&this.state.chat.product.price),React.createElement(\"div\",{className:\"chatNameContainer\"},this.state.chat.product&&this.state.chat.product.name)))))))));}}]);return Chat;}(Component);export default WithAuthConsumer(Chat);","map":{"version":3,"sources":["/Users/mac/ironhack/lab/module_III/toysland/front/src/components/misc/Chat.js"],"names":["React","Component","ToyslandService","Lateral","WithAuthConsumer","Link","ChatMessage","Chat","props","handleChange","event","target","name","value","setState","createComment","preventDefault","createMessage","state","chat","id","message","then","messages","catch","error","console","log","showChat","match","params","findMessages","filter","user","product","productPicture","category","profilePicture","username","map","index","currentUser","price"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport ToyslandService from '../../services/ToyslandService'\nimport Lateral from '../misc/Lateral'\nimport { WithAuthConsumer } from '../context/AuthContext'\nimport { Link } from 'react-router-dom'\nimport ChatMessage from '../misc/ChatMessage'\n\n\nclass Chat extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            message: '',\n            messages: [],\n            chat: {}\n        }\n    }\n\n\n        componentDidMount() {\n\n            ToyslandService.showChat(this.props.match.params.id) // Porqué esto? Por que la url matchae con el \n                .then(chat => {\n                    console.log(chat)\n                    this.setState({\n                        chat: chat,\n                        messages: chat.messages\n                    })\n            });\n\n            ToyslandService.findMessages().then(messages => {\n                this.setState({messages: messages.filter(message => message.user.id === this.props.match.params.id)})\n            })\n        }\n\n        handleChange = (event) => {\n            const {name, value} = event.target\n    \n            this.setState({                                \n                    [name]: value                             \n            })\n        }\n \n    \n\n        createComment = (event) => {\n            event.preventDefault()\n            \n        \n            ToyslandService.createMessage(this.state.chat.id, {'message':this.state.message})\n                .then((message) => {\n                    this.setState({messages: [...this.state.messages, message]})\n                    \n                })\n                .catch( error => {\n                    console.log(error)\n                })\n        }\n\n        render() {  \n          \n            return(\n                <div className=\"EditContainer\">\n\n                    <div className=\"LateralDiv\">\n                        <Lateral />\n                    </div>\n                \n                     <div className='EditContainerContainerChat'>\n\n\n\n                        <div className=\"blockOne\">\n                            <div className=\"bandeja\">\n                                Bandeja de Entrada\n                            </div>\n\n                            <div className=\"productToShow\">\n                                    <div className=\"productToShowContainer\">\n                                        <div className=\"chatImageContainer\">\n                                            <img src={this.state.chat.product && this.state.chat.product.productPicture} alt=\"\" />\n                                        </div>\n                                        <div className=\"chatInfoContainer\">\n                                            <div className=\"chatLinkContainer\">\n                                                <Link to={this.state.chat.product && this.state.chat.product.category}>{this.state.chat.product && this.state.chat.product.category}</Link>\n                                            </div>\n                                            <div className=\"chatNameContainer\">\n                                                {this.state.chat.product && this.state.chat.product.name}\n                                            </div>\n                                        </div>\n                                    </div>\n                            </div>\n                        \n                        </div>\n\n                        \n\n\n                        <div className=\"blockTwo\">\n\n                            <div className=\"bandeja\">\n\n                            \n                                <div className=\"productToShowContainerChat\">\n                                            <div className=\"chatImageContainerChat\">\n                                                <img src={this.state.chat.product && this.state.chat.product.user.profilePicture} alt=\"\" />\n                                            </div>\n                                            <div className=\"chatInfoContainer\">\n                                                <div className=\"chatLinkContainer\">\n                                                    {this.state.chat.product && this.state.chat.product.user.username}\n                                                </div>\n                                                <div className=\"chatNameContainer\">\n                                                    {this.state.chat.product && this.state.chat.product.user.name}\n                                                </div>\n                                            </div>\n                                </div>\n                                \n                            </div>\n\n\n                            <div className=\"SalerMessage\">\n                                {this.state.messages.map((message, index) => (\n                                    <ChatMessage {...message} key= {index} currentUser={this.props.currentUser}/>\n                                ))}\n                            </div>\n\n                            <form className=\"SalerMessage\" onSubmit={this.createComment}>\n                                <div className=\"SendMessage\">\n                                    <div className=\"SendMessageContainer\">\n                                        <input type=\"text\" class=\"chat-footer__form-input\" value={this.state.message} name='message' placeholder=\"New message\" onChange={this.handleChange} />\n                                        <button type=\"submit\">Enviar</button>\n                                    </div>\n                                </div>\n                            </form>\n\n                        </div>\n\n\n\n\n\n\n                        <div className=\"blockThree\">\n\n                            <div className=\"productCard\">\n\n                            <div className=\"productToShowSummary\">\n                                    <div className=\"productToShowContainerSummary\">\n                                        <div className=\"productToShowContainerContainerSummary\">\n                                            <div className=\"chatImageContainerSummary\">\n                                                <img src={this.state.chat.product && this.state.chat.product.productPicture} alt=\"\" />\n                                            </div>\n                                            <div className=\"chatInfoContainer\">\n                                                <div className=\"chatUserNameContainer\">\n                                                    {this.state.chat.product && this.state.chat.product.price}\n                                                </div>\n                                                <div className=\"chatNameContainer\">\n                                                    {this.state.chat.product && this.state.chat.product.name}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                            </div>\n                                \n                            </div>\n\n                        </div>\n\n                    </div>\n                </div>\n            )\n        }\n\n\n\n}\n\nexport default WithAuthConsumer  (Chat)\n\n\n"]},"metadata":{},"sourceType":"module"}