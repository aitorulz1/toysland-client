{"ast":null,"code":"import _classCallCheck from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{createContext}from'react';import ToyslandService from'../../services/ToyslandService';import{Redirect}from'react-router-dom';var AuthContext=createContext();export var AuthContextProvider=/*#__PURE__*/function(_React$Component){_inherits(AuthContextProvider,_React$Component);function AuthContextProvider(){var _getPrototypeOf2;var _this;_classCallCheck(this,AuthContextProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(AuthContextProvider)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={user:JSON.parse(localStorage.getItem('user'))};_this.setUser=function(user){localStorage.setItem('user',user?JSON.stringify(user):null);_this.setState({user:user});};_this.logout=function(){ToyslandService.logout().then(function(){_this.setUser();return React.createElement(Redirect,{to:\"/\"});});};_this.isAuthenticated=function(){return _this.state.user&&_this.state.user.username;};return _this;}_createClass(AuthContextProvider,[{key:\"render\",value:function render(){var value={currentUser:this.state.user,setUser:this.setUser,logout:this.logout,isAuthenticated:this.isAuthenticated};return React.createElement(AuthContext.Provider,{value:value},this.props.children);}}]);return AuthContextProvider;}(React.Component);;export var WithAuthConsumer=function WithAuthConsumer(WrappedComponent){return function(props){return React.createElement(AuthContext.Consumer,null,function(authProps){return React.createElement(WrappedComponent,Object.assign({},props,authProps));});};};export default AuthContext;","map":{"version":3,"sources":["/Users/mac/ironhack/lab/module_III/toysland/front/src/components/context/AuthContext.js"],"names":["React","createContext","ToyslandService","Redirect","AuthContext","AuthContextProvider","state","user","JSON","parse","localStorage","getItem","setUser","setItem","stringify","setState","logout","then","isAuthenticated","username","value","currentUser","props","children","Component","WithAuthConsumer","WrappedComponent","authProps"],"mappings":"kqBAAA,MAAOA,CAAAA,KAAP,EAAgBC,aAAhB,KAAqC,OAArC,CACA,MAAOC,CAAAA,eAAP,KAA4B,gCAA5B,CACA,OAASC,QAAT,KAAyB,kBAAzB,CAIA,GAAMC,CAAAA,WAAW,CAAGH,aAAa,EAAjC,CAEA,UAAaI,CAAAA,mBAAb,+bACIC,KADJ,CACU,CACFC,IAAI,CAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CADJ,CADV,OAKIC,OALJ,CAKc,SAACL,IAAD,CAAU,CAChBG,YAAY,CAACG,OAAb,CAAqB,MAArB,CAA6BN,IAAI,CAAGC,IAAI,CAACM,SAAL,CAAeP,IAAf,CAAH,CAA0B,IAA3D,EACA,MAAKQ,QAAL,CAAc,CAACR,IAAI,CAAJA,IAAD,CAAd,EACH,CARL,OAUIS,MAVJ,CAUa,UAAM,CACXd,eAAe,CAACc,MAAhB,GACKC,IADL,CACU,UAAM,CACR,MAAKL,OAAL,GACA,MAAO,qBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACH,CAJL,EAKH,CAhBL,OAkBIM,eAlBJ,CAkBsB,UAAM,CACpB,MAAO,OAAKZ,KAAL,CAAWC,IAAX,EAAmB,MAAKD,KAAL,CAAWC,IAAX,CAAgBY,QAA1C,CACD,CApBP,sFAsBa,CACT,GAAMC,CAAAA,KAAK,CAAG,CACZC,WAAW,CAAE,KAAKf,KAAL,CAAWC,IADZ,CAEZK,OAAO,CAAE,KAAKA,OAFF,CAGZI,MAAM,CAAE,KAAKA,MAHD,CAIZE,eAAe,CAAE,KAAKA,eAJV,CAAd,CAOA,MACI,qBAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAGE,KAA9B,EACK,KAAKE,KAAL,CAAWC,QADhB,CADJ,CAKC,CAnCL,iCAAyCvB,KAAK,CAACwB,SAA/C,EAuCC,CAED,MAAO,IAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,gBAAD,QAAsB,UAACJ,KAAD,QAClD,qBAAC,WAAD,CAAa,QAAb,MACK,SAACK,SAAD,QAAgB,qBAAC,gBAAD,kBAAsBL,KAAtB,CAAiCK,SAAjC,EAAhB,EADL,CADkD,EAAtB,EAAzB,CAMP,cAAevB,CAAAA,WAAf","sourcesContent":["import React, { createContext } from 'react'\nimport ToyslandService from '../../services/ToyslandService'\nimport { Redirect } from 'react-router-dom';\n\n\n\nconst AuthContext = createContext();\n\nexport class AuthContextProvider extends React.Component {\n    state={\n        user: JSON.parse(localStorage.getItem('user'))\n    }\n\n    setUser = (user) => {\n        localStorage.setItem('user', user ? JSON.stringify(user) : null)\n        this.setState({user})\n    }\n\n    logout = () => {\n        ToyslandService.logout()\n            .then(() => {\n                this.setUser()\n                return <Redirect to=\"/\"/>\n            })\n    }\n\n    isAuthenticated = () => {\n        return this.state.user && this.state.user.username;\n      }\n\n    render() {\n    const value = {\n      currentUser: this.state.user,\n      setUser: this.setUser,\n      logout: this.logout,\n      isAuthenticated: this.isAuthenticated\n    }\n\n    return(\n        <AuthContext.Provider value ={value}>\n            {this.props.children}\n        </AuthContext.Provider>\n    )\n    }\n\n\n\n};\n\nexport const WithAuthConsumer = (WrappedComponent) => (props) => (\n    <AuthContext.Consumer>\n        {(authProps) => (<WrappedComponent {...props} {...authProps} />)}\n    </AuthContext.Consumer>\n)\n\nexport default AuthContext;"]},"metadata":{},"sourceType":"module"}