{"ast":null,"code":"import _objectSpread from \"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/mac/ironhack/lab/module_III/toysland/front/src/components/misc/UpProduct.js\";\nimport React, { Component } from 'react';\nimport ToyslandService from '../../services/ToyslandService';\nimport { Link, Redirect } from 'react-router-dom';\nimport { WithAuthConsumer } from '../context/AuthContext';\n\nclass UpProduct extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {\n        category: '',\n        name: '',\n        price: Number,\n        coin: '',\n        description: '',\n        productPicture: null\n      },\n      error: false,\n      loading: false,\n      success: false,\n      categories: []\n    };\n\n    this.handleChange = event => {\n      const _event$target = event.target,\n            name = _event$target.name,\n            value = _event$target.value,\n            files = _event$target.files;\n      this.setState({\n        data: _objectSpread({}, this.state.data, {\n          [name]: files ? files[0] : value\n        })\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const formData = new FormData();\n      formData.append('profilePicture', this.state.data.product);\n      this.setState({\n        loading: true,\n        error: false\n      }, () => {\n        ToyslandService.product(formData, this.props.product.id).then(product => {\n          this.props.setUser(product);\n          this.setState({\n            success: true\n          });\n        }).catch(error => {\n          this.setState({\n            error: true,\n            loading: false\n          });\n        });\n      });\n    };\n\n    this.componentDidMount = () => {\n      ToyslandService.categories().then(categories => {\n        this.setState({\n          categories: categories // Las de state\n\n        });\n      });\n    };\n  }\n\n  render() {\n    if (this.state.success) {\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      });\n    }\n\n    console.log(this.state.categories);\n    return React.createElement(\"div\", {\n      className: \"Register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"category\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(\"select\", {\n      id: \"category\",\n      name: \"category\",\n      form: \"carform\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, this.state.categories.map(e => {\n      return React.createElement(\"option\", {\n        value: e.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, e.category);\n    })))));\n  }\n\n}\n\nexport default UpProduct;","map":{"version":3,"sources":["/Users/mac/ironhack/lab/module_III/toysland/front/src/components/misc/UpProduct.js"],"names":["React","Component","ToyslandService","Link","Redirect","WithAuthConsumer","UpProduct","state","data","category","name","price","Number","coin","description","productPicture","error","loading","success","categories","handleChange","event","target","value","files","setState","handleSubmit","preventDefault","formData","FormData","append","product","props","id","then","setUser","catch","componentDidMount","render","console","log","map","e"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport ToyslandService from '../../services/ToyslandService'\nimport { Link, Redirect } from 'react-router-dom'\nimport { WithAuthConsumer } from '../context/AuthContext'\n\nclass UpProduct extends Component {\n\n    state = {\n        data: {\n            category: '',\n            name: '',\n            price: Number,\n            coin: '',\n            description: '',\n            productPicture: null\n        },\n        error: false,\n        loading: false,\n        success: false,\n        categories: []\n    }\n\n    handleChange = (event) => {\n        const {name, value, files} = event.target\n\n        this.setState({\n            data: {\n                ...this.state.data,\n                [name] : files ? files[0] : value\n            }\n        })\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault()\n\n        const formData = new FormData()\n            formData.append('profilePicture',this.state.data.product)\n\n        this.setState({loading: true, error: false}, () => {\n            ToyslandService.product(formData, this.props.product.id)\n                .then((product) => {\n                    this.props.setUser(product)\n                    this.setState({success: true})\n                })\n                .catch(error => {\n                    this.setState({ error: true, loading: false })\n                })\n            })\n    }\n\n    componentDidMount = () => {\n        ToyslandService.categories().then(categories => {\n            this.setState({\n                categories: categories // Las de state\n            })\n        })\n    }\n\n    render() {\n        if(this.state.success) {\n            return <Redirect to='/' />\n        }\n\n        console.log(this.state.categories)\n        return (\n            <div className=\"Register\">\n                <form onSubmit={this.handleSubmit}>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"category\"></label>\n\n                        <select id=\"category\" name=\"category\" form=\"carform\">\n                            {this.state.categories.map(e => {\n                                return <option value={e.id}>{e.category}</option>\n                            })}\n                        </select>\n                    </div>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default UpProduct\n"]},"metadata":{},"sourceType":"module"}