{"ast":null,"code":"import _objectSpread from \"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/mac/ironhack/lab/module_III/toysland/front/src/components/misc/EditProduct.js\";\nimport React, { Component } from 'react';\nimport { WithAuthConsumer } from '../context/AuthContext';\nimport ToyslandService from '../../services/ToyslandService';\nimport { Redirect } from 'react-router-dom';\nimport Lateral from '../misc/Lateral';\n\nclass EditProduct extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {\n        category: this.props.currentUser.product.category,\n        name: this.props.currentUser.product.name,\n        price: this.props.currentUser.product.price,\n        description: this.props.currentUser.product.description,\n        productPicture: this.props.currentUser.product.category\n      },\n      succes: false\n    };\n\n    this.handleChange = event => {\n      const _event$target = event.target,\n            name = _event$target.name,\n            value = _event$target.value,\n            files = _event$target.files;\n      this.setState({\n        data: _objectSpread({}, this.state.data, {\n          [name]: files ? files[0] : value\n        })\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const formData = new FormData();\n      formData.append('category', this.state.data.category);\n      formData.append('name', this.state.data.name);\n      formData.append('price', this.state.data.price);\n      formData.append('description', this.state.data.descriptionory);\n      formData.append('productPicture', this.state.data.productPicture);\n      this.setState({\n        loading: true,\n        error: false\n      }, () => {\n        ToyslandService.editProduct(formData, this.props.currentUser.product.id).then(user => {\n          this.props.setUser(user);\n          this.setState({\n            success: true\n          });\n        }).catch(() => {\n          this.setState({\n            error: true,\n            loading: false\n          });\n        });\n      });\n    };\n  }\n\n  render() {\n    if (this.state.success) {\n      return React.createElement(Redirect, {\n        to: \"/profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"EditContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"LateralDiv\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(Lateral, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default WithAuthConsumer(EditProduct);","map":{"version":3,"sources":["/Users/mac/ironhack/lab/module_III/toysland/front/src/components/misc/EditProduct.js"],"names":["React","Component","WithAuthConsumer","ToyslandService","Redirect","Lateral","EditProduct","state","data","category","props","currentUser","product","name","price","description","productPicture","succes","handleChange","event","target","value","files","setState","handleSubmit","preventDefault","formData","FormData","append","descriptionory","loading","error","editProduct","id","then","user","setUser","success","catch","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { WithAuthConsumer } from '../context/AuthContext'\nimport ToyslandService from '../../services/ToyslandService'\nimport { Redirect } from 'react-router-dom'\nimport Lateral from '../misc/Lateral'\n\nclass EditProduct extends Component {\n\n        state = {\n            data: {\n                category: this.props.currentUser.product.category,\n                name: this.props.currentUser.product.name,\n                price: this.props.currentUser.product.price,\n                description: this.props.currentUser.product.description,\n                productPicture: this.props.currentUser.product.category                \n            },\n            succes: false\n        }\n\n        handleChange = (event) => {\n            const {name, value, files} = event.target\n            this.setState({\n\n                data: {\n                    ...this.state.data,\n                    [name] : files ? files[0] : value\n                }\n            })\n        }\n\n        handleSubmit = (event) => {\n            event.preventDefault()\n\n            const formData = new FormData()\n                formData.append('category', this.state.data.category)\n                formData.append('name', this.state.data.name)\n                formData.append('price', this.state.data.price)\n                formData.append('description', this.state.data.descriptionory)\n                formData.append('productPicture', this.state.data.productPicture)\n\n            this.setState({loading: true, error: false}, () => {\n                ToyslandService.editProduct(formData, this.props.currentUser.product.id)\n                    .then((user) => {\n                        this.props.setUser(user)\n                        this.setState({success: true})\n                    })\n                    .catch(() => {\n                        this.setState({error: true, loading: false})\n                    })\n            })\n        }\n\n        render() {    \n            if(this.state.success) {\n               \n                return <Redirect to='/profile' />\n            }\n            return (\n                <div className=\"EditContainer\">\n\n                    <div className=\"LateralDiv\">\n                        <Lateral />\n                    </div>\n                    \n                </div>\n\n            )\n    \n\n}\n}\n\nexport default WithAuthConsumer(EditProduct)"]},"metadata":{},"sourceType":"module"}