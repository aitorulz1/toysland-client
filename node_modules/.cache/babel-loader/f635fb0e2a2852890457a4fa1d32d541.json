{"ast":null,"code":"import _defineProperty from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import ToyslandService from'../../services/ToyslandService';import{Link,Redirect}from'react-router-dom';import{WithAuthConsumer}from'../context/AuthContext';var Register=/*#__PURE__*/function(_Component){_inherits(Register,_Component);function Register(){var _getPrototypeOf2;var _this;_classCallCheck(this,Register);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Register)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={data:{name:'',email:'',username:'',password:'',profilePicture:''},error:false,loading:false,success:false};_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value,files=_event$target.files;_this.setState({data:_objectSpread({},_this.state.data,_defineProperty({},name,files?files[0]:value))});};_this.handleSubmit=function(event){event.preventDefault();var formData=new FormData();formData.append('name',_this.state.data.name);formData.append('username',_this.state.data.username);formData.append('email',_this.state.data.email);formData.append('password',_this.state.data.password);formData.append('profilePicture',_this.state.data.avatar);_this.setState({loading:true,error:false},function(){ToyslandService.register(formData).then(function(){_this.setState({success:true});}).catch(function(){_this.setState({error:true,loading:false});});});};return _this;}_createClass(Register,[{key:\"render\",value:function render(){var errorClassName=this.state.error?'is-invalid':'';if(this.state.success){return React.createElement(Redirect,{to:\"/login\"});}if(this.props.currentUser){return React.createElement(Redirect,{to:\"/profile\"});}return React.createElement(\"div\",{className:\"RegisterContainer\"},React.createElement(\"div\",{className:\"RegisterContainerContainer\"},React.createElement(\"div\",{className:\"Register\"},React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"input\",{value:this.state.data.name,onChange:this.handleChange,autoComplete:\"off\",name:\"name\",type:\"text\",className:\"form-control \".concat(errorClassName),id:\"name\",placeholder:\"Nombre\"})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"input\",{value:this.state.data.username,onChange:this.handleChange,autoComplete:\"off\",name:\"username\",type:\"text\",className:\"form-control \".concat(errorClassName),id:\"username\",placeholder:\"Username\"})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"input\",{value:this.state.data.email,onChange:this.handleChange,autoComplete:\"off\",name:\"email\",type:\"email\",className:\"form-control \".concat(errorClassName),id:\"email\",placeholder:\"Email\"})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"input\",{value:this.state.data.password,onChange:this.handleChange,name:\"password\",type:\"password\",className:\"form-control \".concat(errorClassName),id:\"password\",placeholder:\"Password\"})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"avatar\"},\"Avatar\"),React.createElement(\"input\",{onChange:this.handleChange,name:\"avatar\",type:\"file\",className:\"form-group \".concat(errorClassName),id:\"avatar\"})),React.createElement(\"button\",{type:\"submit\",className:\"btn btn-toysland\",disabled:this.state.loading},\"Registrarse\"),React.createElement(Link,{to:\"/login\",className:\"link-login\"},\"Log In\"),React.createElement(\"span\",{className:\"line\"})))))// Fin de RegisterContainer\n;}}]);return Register;}(Component);export default WithAuthConsumer(Register);","map":{"version":3,"sources":["/Users/mac/ironhack/lab/module_III/toysland/front/src/components/misc/Register.js"],"names":["React","Component","ToyslandService","Link","Redirect","WithAuthConsumer","Register","state","data","name","email","username","password","profilePicture","error","loading","success","handleChange","event","target","value","files","setState","handleSubmit","preventDefault","formData","FormData","append","avatar","register","then","catch","errorClassName","props","currentUser"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport ToyslandService from '../../services/ToyslandService'\nimport { Link, Redirect} from 'react-router-dom'\nimport { WithAuthConsumer } from '../context/AuthContext'\n\nclass Register extends Component {\n\n        state = {\n            data: {\n                name: '',\n                email: '',\n                username: '',\n                password: '',\n                profilePicture: ''\n            },\n            error: false,\n            loading: false,\n            success: false\n        }\n\n        handleChange = (event) => {\n            const { name, value, files} = event.target\n\n            this.setState({\n                data: {\n                    ...this.state.data,\n                    [name] : files ? files[0] : value\n                }\n            })\n        }\n\n        handleSubmit = (event) => {\n            event.preventDefault()            \n\n            const formData = new FormData()\n                formData.append('name',this.state.data.name)\n                formData.append('username',this.state.data.username)\n                formData.append('email',this.state.data.email)\n                formData.append('password',this.state.data.password)\n                formData.append('profilePicture',this.state.data.avatar)\n\n            this.setState({loading: true, error: false}, () => {\n                ToyslandService.register(formData)\n                    .then(() => {\n                        this.setState({ success: true })\n                    })\n                    .catch(() => {\n                        this.setState({ error: true, loading: false })\n                    })\n            })\n        }\n\n            render() {\n                const errorClassName = this.state.error ? 'is-invalid' : ''\n\n                if(this.state.success) {\n                    return <Redirect to='/login' />\n                }\n                \n                if(this.props.currentUser) {\n                    return <Redirect to=\"/profile\" />\n                }\n\n                return (\n                <div className=\"RegisterContainer\">\n                    <div className=\"RegisterContainerContainer\">\n                    <div className=\"Register\">\n                        <form onSubmit={this.handleSubmit}>\n\n                            <div className=\"form-group\">\n\n                                <input\n                                    value={this.state.data.name}\n                                    onChange={this.handleChange}\n                                    autoComplete=\"off\"\n                                    name=\"name\"\n                                    type=\"text\"\n                                    className={`form-control ${errorClassName}`}\n                                    id=\"name\"\n                                    placeholder=\"Nombre\"\n                                />\n                            </div>\n\n                            <div className=\"form-group\">\n\n                                <input\n                                    value={this.state.data.username}\n                                    onChange={this.handleChange}\n                                    autoComplete='off'\n                                    name='username'\n                                    type='text'\n                                    className={`form-control ${errorClassName}`}\n                                    id='username'\n                                    placeholder='Username'                                \n                                />\n\n                            </div>\n\n                            <div className='form-group'>\n\n                                <input \n                                    value={this.state.data.email}\n                                    onChange={this.handleChange}\n                                    autoComplete='off'\n                                    name='email'\n                                    type='email'\n                                    className={`form-control ${errorClassName}`}\n                                    id='email'\n                                    placeholder='Email'\n                                />\n\n                            </div>\n\n                            <div className='form-group'>\n\n                                <input\n                                    value={this.state.data.password}\n                                    onChange={this.handleChange}\n                                    name='password'\n                                    type='password'\n                                    className={`form-control ${errorClassName}`}\n                                    id='password'\n                                    placeholder='Password'\n                                />\n\n                            </div>\n\n                            <div className='form-group'>\n                                <label htmlFor='avatar'>Avatar</label>\n\n                                <input \n                                    onChange={this.handleChange}\n                                    name='avatar'\n                                    type='file'\n                                    className={`form-group ${errorClassName}`}\n                                    id='avatar'\n                                />\n                            </div>\n\n                            <button\n                                type='submit'\n                                className='btn btn-toysland'\n                                disabled={this.state.loading}\n                            >\n                                Registrarse\n                            </button>\n\n                            <Link to=\"/login\" className=\"link-login\">Log In</Link>\n                            <span className=\"line\"></span>\n\n                        </form>\n                    </div>\n                    </div>\n                </div> // Fin de RegisterContainer\n                )\n            }\n\n}\n\nexport default WithAuthConsumer(Register)"]},"metadata":{},"sourceType":"module"}