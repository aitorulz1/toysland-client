{"ast":null,"code":"import _objectSpread from \"/Users/mac/ironhack/lab/module_III/toysland/front/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/mac/ironhack/lab/module_III/toysland/front/src/components/misc/UpProduct.js\";\nimport React, { Component } from 'react';\nimport ToyslandService from '../../services/ToyslandService';\nimport { Link, Redirect } from 'react-router-dom';\nimport { WithAuthConsumer } from '../context/AuthContext';\n\nclass UpProduct extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {\n        category: 'Vintage',\n        name: '',\n        price: 0,\n        // coin: '',\n        description: '',\n        productPicture: null\n      },\n      error: false,\n      loading: false,\n      success: false,\n      categories: []\n    };\n\n    this.handleChange = event => {\n      const _event$target = event.target,\n            name = _event$target.name,\n            value = _event$target.value,\n            files = _event$target.files;\n      this.setState({\n        data: _objectSpread({}, this.state.data, {\n          [name]: files ? files[0] : value\n        })\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const formData = new FormData();\n      formData.append('category', this.state.data.category);\n      formData.append('name', this.state.data.name);\n      formData.append('price', this.state.data.price); // formData.append('coin',this.state.data.coin)\n\n      formData.append('description', this.state.data.description);\n      formData.append('productPicture', this.state.data.productPicture);\n      formData.append('user', this.props.currentUser.id);\n      console.log(formData);\n      this.setState({\n        loading: true,\n        error: false\n      }, () => {\n        ToyslandService.product(formData).then(product => {\n          this.props.setUser(_objectSpread({}, this.props.currentUser, {\n            product: [...this.props.currentUser.product, product]\n          }));\n          this.setState({\n            success: true\n          });\n        }).catch(error => {\n          this.setState({\n            error: true,\n            loading: false\n          });\n        });\n      });\n    };\n\n    this.componentDidMount = () => {\n      ToyslandService.categories().then(categories => {\n        this.setState({\n          categories: categories.map(c => c.category) // Las de state\n\n        });\n      });\n    };\n  }\n\n  render() {\n    const errorClassName = this.state.error ? 'is-invalid' : '';\n\n    if (this.state.success) {\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"RegisterContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"category\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(\"select\", {\n      id: \"category\",\n      name: \"category\",\n      form: \"carform\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, this.state.categories.map((c, i) => {\n      return React.createElement(\"option\", {\n        key: i,\n        value: c,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, c);\n    }))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Nombre\"), React.createElement(\"input\", {\n      value: this.state.data.name,\n      onChange: this.handleChange,\n      autoComplete: \"off\",\n      name: \"name\",\n      type: \"text\",\n      className: `form-control ${errorClassName}`,\n      id: \"name\",\n      placeholder: \"Nombre\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Precio\"), React.createElement(\"input\", {\n      value: this.state.data.price,\n      onChange: this.handleChange,\n      autoComplete: \"off\",\n      name: \"price\",\n      type: \"number\",\n      className: `form-control ${errorClassName}`,\n      id: \"price\",\n      placeholder: \"Price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Descripci\\xF3n\"), React.createElement(\"input\", {\n      value: this.state.data.description,\n      onChange: this.handleChange,\n      autoComplete: \"off\",\n      name: \"description\",\n      type: \"text\",\n      className: `form-control ${errorClassName}`,\n      id: \"description\",\n      placeholder: \"M\\xE1x 140 caracteres\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"productPicture\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Im\\xE1genes\"), React.createElement(\"input\", {\n      multiple: true,\n      onChange: this.handleChange,\n      name: \"productPicture\",\n      type: \"file\",\n      className: `form-group ${errorClassName}`,\n      id: \"productPicture\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-block btn-primary mb-3\",\n      disabled: this.state.loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Subir Producto\"))));\n  }\n\n}\n\nexport default WithAuthConsumer(UpProduct);","map":{"version":3,"sources":["/Users/mac/ironhack/lab/module_III/toysland/front/src/components/misc/UpProduct.js"],"names":["React","Component","ToyslandService","Link","Redirect","WithAuthConsumer","UpProduct","state","data","category","name","price","description","productPicture","error","loading","success","categories","handleChange","event","target","value","files","setState","handleSubmit","preventDefault","formData","FormData","append","props","currentUser","id","console","log","product","then","setUser","catch","componentDidMount","map","c","render","errorClassName","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport ToyslandService from '../../services/ToyslandService'\nimport { Link, Redirect } from 'react-router-dom'\nimport { WithAuthConsumer } from '../context/AuthContext'\n\nclass UpProduct extends Component {\n\n    state = {\n        data: {\n            category: 'Vintage',\n            name: '',\n            price: 0,\n            // coin: '',\n            description: '',\n            productPicture: null\n        },\n        error: false,\n        loading: false,\n        success: false,\n        categories: []\n    }\n\n    handleChange = (event) => {\n        const {name, value, files} = event.target\n\n        this.setState({\n            data: {\n                ...this.state.data,\n                [name] : files ? files[0] : value\n            }\n        })\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault()\n\n        const formData = new FormData()\n            formData.append('category',this.state.data.category)\n            formData.append('name',this.state.data.name)\n            formData.append('price',this.state.data.price)\n            // formData.append('coin',this.state.data.coin)\n            formData.append('description',this.state.data.description)\n            formData.append('productPicture',this.state.data.productPicture)\n            formData.append('user', this.props.currentUser.id)\n        console.log(formData)\n        this.setState({loading: true, error: false}, () => {\n            ToyslandService.product(formData)\n                .then((product) => {                   \n                    this.props.setUser({ ...this.props.currentUser, product: [...this.props.currentUser.product, product]})\n\n                    this.setState({success: true})\n                })\n                .catch(error => {\n                    this.setState({ error: true, loading: false })\n                })\n            })\n    }\n\n    componentDidMount = () => {\n        ToyslandService.categories()\n            .then(categories => {\n                this.setState({\n                    categories: categories.map(c => c.category) // Las de state\n                })\n            }\n        )\n    }\n\n    render() {\n        const errorClassName = this.state.error ? 'is-invalid' : ''\n\n        if(this.state.success) {\n            return <Redirect to='/' />\n        }\n\n        return (\n        <div className=\"RegisterContainer\">\n            <div className=\"Register\">\n                <form onSubmit={this.handleSubmit}>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"category\"></label>\n\n                        <select id=\"category\" name=\"category\" form=\"carform\" onChange={this.handleChange}> \n                            {this.state.categories.map((c, i) => {\n                                return <option key={i} value={c}>{c}</option>\n                            })}\n                        </select>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"name\">Nombre</label>\n\n                        <input \n                            value={this.state.data.name}\n                            onChange={this.handleChange}\n                            autoComplete=\"off\"\n                            name=\"name\"\n                            type=\"text\"\n                            className={`form-control ${errorClassName}`}\n                            id=\"name\"\n                            placeholder=\"Nombre\"                       \n                        />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"price\">Precio</label>\n\n                        <input \n                            value={this.state.data.price}\n                            onChange={this.handleChange}\n                            autoComplete=\"off\"\n                            name=\"price\"\n                            type=\"number\"\n                            className={`form-control ${errorClassName}`}\n                            id=\"price\"\n                            placeholder=\"Price\"                       \n                        />\n                    </div>\n\n                    {/* <div className=\"form-group\">\n                        <label htmlFor=\"coin\">Moneda</label>\n\n                        <select id=\"coin\" name=\"coin\" form=\"coin\" onChange={this.handleChange}>\n                            <option value=\"€\">€</option>\n                            <option value=\"$\">$</option>\n                            <option value=\"£\">£</option>\n                        </select>\n\n                    </div> */}\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"description\">Descripción</label>\n\n                        <input \n                            value={this.state.data.description}\n                            onChange={this.handleChange}\n                            autoComplete=\"off\"\n                            name=\"description\"\n                            type=\"text\"\n                            className={`form-control ${errorClassName}`}\n                            id=\"description\"\n                            placeholder=\"Máx 140 caracteres\"                       \n                        />\n                    </div>\n\n                    \n                    <div className='form-group'>\n                                <label htmlFor='productPicture'>Imágenes</label>\n\n                                <input multiple \n                                    onChange={this.handleChange}\n                                    name='productPicture'\n                                    type='file'\n                                    className={`form-group ${errorClassName}`}\n                                    id='productPicture'\n                                />\n\n\n                    </div>\n\n                    <button\n                        type='submit'\n                        className='btn btn-block btn-primary mb-3'\n                        disabled={this.state.loading}\n                    >\n                        Subir Producto\n                    </button>\n\n                </form>\n            </div>\n        </div>\n        )\n    }\n}\n\n\n\nexport default WithAuthConsumer (UpProduct)\n"]},"metadata":{},"sourceType":"module"}